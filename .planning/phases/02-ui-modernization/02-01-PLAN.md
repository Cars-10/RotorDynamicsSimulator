# Plan: UI Modernization (Phase 2)

## Objective
Establish a professional, scalable design system and refactor the monolithic UI into modular components to improve maintainability and visual fidelity.

## Context
- **Current State:** Monolithic `App.tsx` and `RotorVisualizer.tsx`. Styles are hardcoded utility classes. No centralized design tokens.
- **Goal:** Professional engineering tool aesthetic ("Dark Mode CAD"), modular architecture, and high-fidelity SVG rendering.
- **Reference:** Requirements UI-01 (High fidelity visualization).

## Execution Context
- **Source:** `src/`
- **Tech Stack:** React, Tailwind CSS v4, Lucide React (icons - need to verify availability or use SVG), Vitest.

## Tasks

### 1. Design System Foundation
- [ ] **Configure Tailwind Theme**: Update `tailwind.config.js` with semantic color palette (canvas, panel, surface, primary, accent, success, warning, danger).
- [ ] **Create Base Components**:
    - `src/components/ui/Button.tsx`: Variants (primary, ghost, icon, danger).
    - `src/components/ui/Panel.tsx`: Standard container with border/bg.
    - `src/components/ui/Select.tsx`: Styled dropdown.
    - `src/components/ui/Slider.tsx`: Styled range input.
    - `src/components/ui/Badge.tsx`: Status indicators.

### 2. Layout Architecture
- [ ] **Extract Layout Components**:
    - `src/components/layout/MainLayout.tsx`: Grid structure for Header, Sidebar, Workspace.
    - `src/components/layout/Header.tsx`: Application title, global actions (moved from Controls).
    - `src/components/layout/Sidebar.tsx`: Collapsible editor panel.
- [ ] **Refactor App.tsx**: Replace raw divs with `MainLayout` and slot in the content.

### 3. Visualization Modularization
- [ ] **Create Visualizer Components**:
    - `src/components/visualizer/VisualizerContainer.tsx`: Manages view state, zoom/pan logic.
    - `src/components/visualizer/SvgDefs.tsx`: Shared gradients and patterns.
    - `src/components/visualizer/views/IsometricView.tsx`: Extracted 3D projection logic.
    - `src/components/visualizer/views/RadialView.tsx`: Extracted orbit logic.
    - `src/components/visualizer/views/LongitudinalView.tsx`: Extracted side view logic.
- [ ] **Refactor RotorVisualizer**: Replace huge file with `VisualizerContainer` importing the sub-views.

### 4. Component Polish & Integration
- [ ] **Refactor Controls**: Split `Controls.tsx` into `Header` (actions) and `ViewportControls` (view specific toggles floating in workspace).
- [ ] **Apply Design Tokens**: Ensure all new components use the semantic theme colors.
- [ ] **Enhance Visuals**:
    - Add "Blueprint" grid background to `VisualizerContainer`.
    - Improve "Metal Sheen" gradient in `SvgDefs`.

## Verification
- [ ] **Build Check**: `npm run build` passes.
- [ ] **Lint Check**: `npm run lint` passes.
- [ ] **Visual Check**:
    - Dark mode theme is consistent.
    - No broken layout in "Composite" view.
    - Resizing window handles layout gracefully.
    - "Game Mode" UI still functions within new layout.

## Output
- Refactored `src/components/` structure.
- Updated `tailwind.config.js`.
- Modularized `RotorVisualizer`.
