# Plan: Integrate Physics UI

## Objective
Enable editing of Bearing and Seal physics properties (stiffness/damping matrices) through the UI.

## Execution Context
- **Source**: `src/components/editors/`, `src/App.tsx`, `src/hooks/useSimulation.ts`
- **Goal**: Provide a user interface for the data models created in Plan 03-02.

## Context
Plan 03-02 added the `physics` field to `RotorComponent` containing stiffness and damping matrices. Currently, there is no way for the user to view or edit these values. We need to introduce a component selection state and a dedicated editor panel.

## Tasks
- [ ] **Update State Logic**: Add `updateRotorComponent(id: string, updates: Partial<RotorComponent>)` to `useSimulation.ts` to allow modifying nested physics properties.
- [ ] **Create Physics Components**:
    - `src/components/editors/PhysicsCoeffInput.tsx`: Small input group for `SpeedDependentCoefficients` (Constant term).
    - `src/components/editors/StiffnessDampingEditor.tsx`: A grid layout displaying the 2x2 Stiffness (K) and Damping (C) matrices using the coeff inputs.
    - `src/components/editors/ComponentPropertiesEditor.tsx`: Main side panel component that takes a `RotorComponent`, determines its type (Bearing/Seal), and renders the appropriate physics editor.
- [ ] **Implement Selection State**: Update `App.tsx` to track `selectedComponentId` (string | null).
- [ ] **Update Visualizer**: Modify `RotorVisualizer` (and its sub-views like `LongitudinalView`) to handle clicks on bearing/seal elements and trigger `onSelectComponent`.
- [ ] **Dynamic Sidebar**: Update `App.tsx` to conditionally render `ComponentPropertiesEditor` in the Sidebar when a component is selected, otherwise falling back to the default `ShaftEditor`.

## Verification
- **Unit Test**: Verify `updateRotorComponent` correctly merges nested physics objects.
- **Manual**: Click a bearing -> Sidebar changes to Bearing Editor -> Edit Kxx -> Save -> Verify value persists.

## Success Criteria
- [ ] `useSimulation` exports `updateRotorComponent`.
- [ ] Clicking a bearing in the visualizer updates `selectedComponentId`.
- [ ] Sidebar displays `ComponentPropertiesEditor` when a bearing is selected.
- [ ] Users can edit Kxx, Kyy, Cxx, Cyy values and see them persist in the application state.

## Output
- `src/hooks/useSimulation.ts`
- `src/components/editors/PhysicsCoeffInput.tsx`
- `src/components/editors/StiffnessDampingEditor.tsx`
- `src/components/editors/ComponentPropertiesEditor.tsx`
- `src/App.tsx`
- `src/components/RotorVisualizer.tsx`